<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>00-99 Multi Number Tracker (2 Column)</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      background:#f2f2f2;
      padding:20px;
    }

    .container{
      max-width: 1400px;
      margin:auto;
      background:white;
      padding:20px;
      border-radius:14px;
      box-shadow:0 10px 20px rgba(0,0,0,0.15);
    }

    h2{text-align:center;}
    .hint{
      text-align:center;
      font-size:13px;
      color:#555;
      margin-bottom:10px;
    }

    .topbar{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:15px 0;
    }

    .topbar input{
      flex:1;
      padding:10px;
      border-radius:10px;
      border:1px solid #ccc;
      min-width:250px;
    }

    button{
      padding:10px 14px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      color:white;
      font-weight:bold;
    }

    .blue{background:#007bff;}
    .blue:hover{background:#0056b3;}

    .purple{background:#6f42c1;}
    .purple:hover{background:#4e2d8a;}

    .red{background:#dc3545;}
    .red:hover{background:#a71d2a;}

    .orange{background:#fd7e14;}
    .orange:hover{background:#c85f0e;}

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:20px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:10px;
      font-size:13px;
    }

    th, td{
      border:1px solid #ddd;
      padding:6px;
      text-align:center;
    }

    th{
      background:#f8f8f8;
    }

    input.listInput{
      width:90%;
      padding:6px;
      border-radius:8px;
      border:1px solid #ccc;
      font-size:13px;
    }

    .lineTotal{
      font-weight:bold;
    }

    .totalbox{
      margin-top:15px;
      padding:15px;
      border-radius:12px;
      background:#eaf7ea;
      border:1px solid #b6e3b6;
      font-size:20px;
      font-weight:bold;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>✅ 00–99 Multi Number Add + Total (2 Column)</h2>
    <div class="hint">
      Example: <b>00 = 12,34,54,23</b> (you can also type: 12+34+54+23)<br/>
      Multi search: <b>00,23,34</b>
    </div>

    <div class="topbar">
      <input type="text" id="searchBox" placeholder="Search: 00 OR 00,23,34"/>
      <button class="blue" onclick="saveData()">Save</button>
      <button class="purple" onclick="copyFullReport()">Copy Full Report</button>
      <button class="orange" onclick="exportData()">Export</button>
      <button class="red" onclick="resetData()">Reset</button>
    </div>

    <div class="grid">
      <!-- Left 00-49 -->
      <div>
        <h3 style="text-align:center;">00 – 49</h3>
        <table>
          <thead>
            <tr>
              <th>Index</th>
              <th>Numbers</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody id="leftBody"></tbody>
        </table>
      </div>

      <!-- Right 50-99 -->
      <div>
        <h3 style="text-align:center;">50 – 99</h3>
        <table>
          <thead>
            <tr>
              <th>Index</th>
              <th>Numbers</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody id="rightBody"></tbody>
        </table>
      </div>
    </div>

    <div class="totalbox" id="grandTotalBox">Grand Total: 0</div>
  </div>

  <script>
    const leftBody = document.getElementById("leftBody");
    const rightBody = document.getElementById("rightBody");
    const grandTotalBox = document.getElementById("grandTotalBox");
    const searchBox = document.getElementById("searchBox");

    let data = {};

    function loadData(){
      const saved = localStorage.getItem("multiNumberTracker2col");
      if(saved){
        data = JSON.parse(saved);
      }
    }

    function autoSave(){
      localStorage.setItem("multiNumberTracker2col", JSON.stringify(data));
    }

    function saveData(){
      autoSave();
      alert("✅ Saved Successfully!");
    }

    function resetData(){
      if(!confirm("Reset all entries?")) return;
      data = {};
      localStorage.removeItem("multiNumberTracker2col");
      renderTables();
      alert("✅ Reset Done!");
    }

    function parseLineToNumbers(text){
      if(!text) return [];
      const cleaned = text.replace(/\+/g, ",");
      const parts = cleaned.split(",").map(x => x.trim()).filter(x => x !== "");
      return parts.map(n => parseInt(n)).filter(n => !isNaN(n));
    }

    function lineTotal(text){
      return parseLineToNumbers(text).reduce((a,b)=>a+b,0);
    }

    function calculateGrandTotal(){
      let total = 0;
      for(let i=0;i<100;i++){
        const key = String(i).padStart(2,"0");
        total += lineTotal(data[key] || "");
      }
      grandTotalBox.innerText = "Grand Total: " + total;
      return total;
    }

    function exportData(){
      let txt = "";
      let grand = 0;

      for(let i=0; i<100; i++){
        const key = String(i).padStart(2,"0");
        const raw = (data[key] || "").trim();
        if(raw){
          const t = lineTotal(raw);
          txt += `${key} = ${raw}  | Total = ${t}\n`;
          grand += t;
        }
      }

      txt += `\nGrand Total = ${grand}`;

      const blob = new Blob([txt], {type:"text/plain"});
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "00-99-multi-data.txt";
      link.click();
    }

    async function copyFullReport(){
      let report = "";
      let grand = 0;

      for(let i=0; i<100; i++){
        const key = String(i).padStart(2,"0");
        const raw = (data[key] || "").trim();

        if(raw){
          const t = lineTotal(raw);
          report += `${key} = ${raw} | Total = ${t}\n`;
          grand += t;
        }
      }

      report += `\nGrand Total = ${grand}`;

      try{
        await navigator.clipboard.writeText(report);
        alert("✅ Full Report Copied!");
      } catch (err){
        alert("❌ Copy failed! Your browser may block clipboard.");
      }
    }

    function parseSearchKeys(searchText){
      if(!searchText.trim()) return null;

      let parts = searchText
        .split(/[,|\s]+/)
        .map(x => x.trim())
        .filter(x => x !== "");

      parts = parts.map(x => x.padStart(2, "0"));
      parts = parts.filter(x => /^\d{2}$/.test(x));

      return [...new Set(parts)];
    }

    function renderRow(key){
      const tr = document.createElement("tr");

      const tdIndex = document.createElement("td");
      tdIndex.innerText = key;

      const tdInput = document.createElement("td");
      const input = document.createElement("input");
      input.className = "listInput";
      input.placeholder = "12,34,54,23";
      input.value = data[key] || "";

      const tdTotal = document.createElement("td");
      tdTotal.className = "lineTotal";
      tdTotal.innerText = lineTotal(input.value);

      input.addEventListener("input", () => {
        data[key] = input.value;
        tdTotal.innerText = lineTotal(input.value);
        calculateGrandTotal();
        autoSave();
      });

      tdInput.appendChild(input);

      tr.appendChild(tdIndex);
      tr.appendChild(tdInput);
      tr.appendChild(tdTotal);

      return tr;
    }

    function renderTables(){
      leftBody.innerHTML = "";
      rightBody.innerHTML = "";

      const searchKeys = parseSearchKeys(searchBox.value);

      for(let i=0;i<100;i++){
        const key = String(i).padStart(2,"0");

        if(searchKeys && !searchKeys.includes(key)) continue;

        const row = renderRow(key);
        if(i < 50) leftBody.appendChild(row);
        else rightBody.appendChild(row);
      }

      calculateGrandTotal();
    }

    searchBox.addEventListener("input", () => {
      renderTables();
    });

    loadData();
    renderTables();
  </script>
</body>
</html>
